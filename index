<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>" 拽专</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .header { text-align: right; }
        .form-section, .report-section, .count-section { 
            margin: 20px; 
            padding: 20px; 
            border: 1px solid #ccc; 
            border-radius: 8px; 
            background-color: #f9f9f9; 
        }
        .highlight { background-color: #e0ffe0; color: #ff0000; }
        .button { background-color: green; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: right; }
        th { background-color: #d0e0ff; }
        td { background-color: #ffffff; }
        .form-label { display: block; margin: 10px 0 5px; }
        .form-select, .form-input { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; }
        .whatsapp-message { font-weight: bold; }
        .warehouse-1 { background-color: #e0b0ff; } /* 爪注 住 住 1 */
        .warehouse-4 { background-color: #b2fba0; } /* 爪注 专拽 住 4 */
        @keyframes flash { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; }
    </style>
</head>
<body>
    <div class="header">
        <h1>" 拽专</h1>
        <p id="date-time"></p>
    </div>

    <div class="form-section">
        <h2>砖</h2>
        <form id="morning-report-form">
            <label class="form-label" for="driver-name">砖 :</label>
            <select id="driver-name" class="form-select">
                <option>转</option>
                <option>砖</option>
                <option>注</option>
                <option>注</option>
                <option></option>
            </select>
            <label class="form-label" for="client-name">砖 拽:</label>
            <input type="text" id="client-name" class="form-input">
            <label class="form-label" for="warehouse">住:</label>
            <select id="warehouse" class="form-select">
                <option value="1">1</option>
                <option value="4">4</option>
            </select>
            <label class="form-label" for="delivery-time">砖注转 住驻拽:</label>
            <select id="delivery-time" class="form-select">
                <option>06:00</option>
                <option>07:00</option>
                <option>08:00</option>
                <option>09:00</option>
                <option>10:00</option>
                <option>11:00</option>
                <option>12:00</option>
                <option>13:00</option>
                <option>14:00</option>
                <option>15:00</option>
                <option>16:00</option>
                <option>17:00</option>
            </select>
            <label class="form-label" for="exit">爪:</label>
            <select id="exit" class="form-select">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
            <label class="form-label" for="transport-type">住 :</label>
            <select id="transport-type" class="form-select">
                <option>转 砖转</option>
                <option> 祝</option>
                <option>转 祝 15 专</option>
                <option>注转 祝</option>
            </select>
            <button type="button" class="button" onclick="addTask()">住祝 砖</button>
        </form>
    </div>

    <div class="report-section">
        <h2>" 拽专</h2>
        <table id="report-table">
            <thead>
                <tr>
                    <th>转专</th>
                    <th></th>
                    <th>拽</th>
                    <th>住</th>
                    <th>爪</th>
                    <th>住 </th>
                </tr>
            </thead>
            <tbody>
                <!-- 转 转住驻  -->
            </tbody>
        </table>
        <div id="summary" style="margin-top: 20px;">
            <p>住驻专转 爪转: <span id="exit-count">0</span></p>
            <p>住驻专 驻 住 1: <span id="warehouse-1-count">0</span></p>
            <p>住驻专 驻 住 4: <span id="warehouse-4-count">0</span></p>
        </div>
    </div>

    <div class="count-section highlight">
        <h2>住驻专转 爪转</h2>
        <p>转  驻注: <span id="active-drivers-count">0</span></p>
        <button class="button" onclick="shareWhatsApp()"> 砖转祝 爪驻</button>
    </div>

    <script>
        function addTask() {
            // 住驻转 砖 
            const table = document.getElementById('report-table').getElementsByTagName('tbody')[0];
            const newRow = table.insertRow();
            const warehouse = document.getElementById('warehouse').value;
            newRow.innerHTML = `<td>${new Date().toLocaleDateString()}</td>
                                <td>${document.getElementById('driver-name').value}</td>
                                <td>${document.getElementById('client-name').value}</td>
                                <td class="${warehouse === '1' ? 'warehouse-1' : 'warehouse-4'}">${warehouse}</td>
                                <td>${document.getElementById('exit').value}</td>
                                <td>${document.getElementById('transport-type').value}</td>`;
            updateCounts();
        }

        function updateCounts() {
            // 注 住驻专转
            const count = document.getElementById('report-table').getElementsByTagName('tbody')[0].rows.length;
            document.getElementById('active-drivers-count').innerText = count;

            let exitCount = 0;
            let warehouse1Count = 0;
            let warehouse4Count = 0;

            const rows = document.getElementById('report-table').getElementsByTagName('tbody')[0].rows;
            for (let i = 0; i < rows.length; i++) {
                exitCount++;
                const warehouseCell = rows[i].cells[3].innerText;
                if (warehouseCell === '1') {
                    warehouse1Count++;
                } else if (warehouseCell === '4') {
                    warehouse4Count++;
                }
            }

            document.getElementById('exit-count').innerText = exitCount;
            document.getElementById('warehouse-1-count').innerText = warehouse1Count;
            document.getElementById('warehouse-4-count').innerText = warehouse4Count;
        }

        function shareWhatsApp() {
            // 砖转祝 爪驻
            const rows = document.getElementById('report-table').getElementsByTagName('tbody')[0].rows;
            let message = '*" 拽专:*\n';
            let exitCount = 0;
            let warehouse1Count = 0;
            let warehouse4Count = 0;

            for (let i = 0; i < rows.length; i++) {
                const cells = rows[i].cells;
                message += ` 转专: ${cells[0].innerText}\n`;
                message += ` : ${cells[1].innerText}\n`;
                message += ` 拽: ${cells[2].innerText}\n`;
                message += ` 住: ${cells[3].innerText}\n`;
                message += ` 爪: ${cells[4].innerText}\n`;
                message += ` 住 : ${cells[5].innerText}\n\n`;
                exitCount++;
                if (cells[3].innerText === '1') {
                    warehouse1Count++;
                } else if (cells[3].innerText === '4') {
                    warehouse4Count++;
                }
            }

            message += ` 住驻专转 爪转: ${exitCount}\n`;
            message += ` 住驻专 驻 住 1: ${warehouse1Count}\n`;
            message += ` 住驻专 驻 住 4: ${warehouse4Count}\n`;

            const phoneNumber = '972508860896';
            window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`);
        }

        // 爪转 转专 砖注 
        setInterval(() => {
            document.getElementById('date-time').innerText = new Date().toLocaleString();
        }, 1000);
    </script>
</body>
</html>
